---
title: 博客主题改造计划
author: 胤
categories: [笔记本]
date: 2022-05-17 12:34:31
index_img: https://i0.hdslb.com/bfs/album/abb2f330fb6128fd320ea654f9d0b8c316a5dabe.png@600w.webp
description: 记录一次博客主题魔改过程，主要内容是修改头部背景为全屏背景。
---

我的博客最初使用的是 Butterlfy 主题，当时通过一系列魔改用上了全屏背景，于是乎，我就想能不能让 Fluid 主题也用上全屏背景。

在主题 Github 仓库的一条 issue 里面，作者不建议使用全屏背景，原因是手机端浏览效果可能不太理想，那我只好尝试自己魔改咯。

首先需要把原来的 Banner 头图和 Mask 蒙版清除掉，在自定义 css 文件中加入如下内容即可：

```css
#banner {
    background-image: none !important;
}

#banner .mask {
    background-color: transparent !important;
}
```

然后需要通过主题自带的注入器在 `body` 标签的开头注入全屏背景，至于如何注入可以查看[进阶用法](https://hexo.fluid-dev.com/docs/advance/)，注入代码如下：

```javascript
hexo.extend.filter.register('theme_inject', function(injects) {
    injects.bodyBegin.raw('default', '<div id="web-bg"></div><div id="web-mask"></div>');
});
```

接下来需要设置全屏背景的 css 样式，自定义样式代码如下：

PS：你也可以自己设定喜欢的样式啦！

```css
#web-bg {
    position: fixed;
    z-index: -999;
    width: 100%;
    height: 100%;
    background-attachment: fixed;
    background-image: url();
    transition: background-color 0.5s ease-in;
    -moz-transition: background-color 0.5s ease-in;
    -webkit-transition: background-color 0.5s ease-in;
}
```

可能有些背景在夜间模式下会显得很亮，所以我们还需要在它上面加上一个透明蒙版，通过修改透明度来实现亮度的调节。具体代码如下：

```css
/* 夜间透明度为 0.6 */
#web-mask {
    position: fixed;
    z-index: -888;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.6);
    transition: background-color 0.5s ease-in;
    -moz-transition: background-color 0.5s ease-in;
    -webkit-transition: background-color 0.5s ease-in;
}

/* 日间透明度为 0 */
[data-user-color-scheme="light"] #web-mask {
    background-color: transparent;
}
```

这样一个简单的全屏背景就设置好啦，具体效果请参考本博客。